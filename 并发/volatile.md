volatile变量不会被缓存再寄存器或对其他处理器不可见的地方，因此读取volatile总是会返回最新写入的值

volatile变量提供了一个机制，一个变量被多个线程共享，线程直接给这个变量赋值。

当对非volatile变量进行读写的时候，每个线程先从内存拷贝变量到cpu缓存中，

每个线程可能在不同cpu上被处理，所以会拷贝到不同的cpucache中，

声明变量是volatile的，JVM保证每次读变量都从内存中读，跳过了cpu cache这一步。

![image-20210224101931182](assets/image-20210224101931182.png)