秒杀的关键在于动静分离、提前校验。
\1. 根据 db 规格做好进程内限流，预留一倍升级空间。
\2. 静态数据（商品属性）提前预热至缓存，缓存过期时间为秒杀结束时间。
\3. 各种校验提前做，特别是库存校验。
\4. 库存怎么扣减
\- 提前预热库存数据至 redis，原子 DECR 扣减库存，扣减成功 mq 同步 db 库存。
\5. 如何下单？
\- 校验成功通过 mq 抛出下单事件，做好耗时监控，前端页面 hold 一下。
\6. 超时未支付怎么办？
\- 下单成功时抛出抛出延时消息，比如 30 分钟。到期检测订单状态，失败 INCR 把库存还回去。
\7. 如何防刷？
\- uid 固定时间限流
\8. 如何反止链接提前泄露？
\- 产品 id 哈希
\9. 如何反止暴力遍历？
\- 产品 id 经过布隆过滤器校验一下