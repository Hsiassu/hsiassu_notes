在执行命令的过程中，服务器和客户端进行了什么交互，服务器中的各个不同组件又是如何协作的。

介绍serverCron函数，详细列举这个函数执行的操作，说明这些操作对维护服务器正常运作有何帮助。

介绍服务器启动过程，

#### 命令请求的执行过程

![image-20210219102907333](assets/image-20210219102907333.png)

![image-20210219102901193](assets/image-20210219102901193.png)

![image-20210219102929988](assets/image-20210219102929988.png)

![image-20210219103003177](assets/image-20210219103003177.png)

![image-20210219103142241](assets/image-20210219103142241.png)

![image-20210219103324329](assets/image-20210219103324329.png)

#### 命令执行器（2）执行预备操作

![image-20210219103615502](assets/image-20210219103615502.png)

![image-20210219103624312](assets/image-20210219103624312.png)

### 命令执行器（3）调用命令的实现函数

![image-20210219103926436](assets/image-20210219103926436.png)

![image-20210219103950638](assets/image-20210219103950638.png)

### 命令执行器（4）执行后续工作

![image-20210219104021387](assets/image-20210219104021387.png)

#### 将命令回复发送给客户端

![image-20210219104410951](assets/image-20210219104410951.png)

![image-20210219104433446](assets/image-20210219104433446.png)

#### serverCron函数

![image-20210219104600131](assets/image-20210219104600131.png)

![image-20210219104703669](assets/image-20210219104703669.png)

![image-20210219104654066](assets/image-20210219104654066.png)

![image-20210219105134500](assets/image-20210219105134500.png)

![image-20210219105745331](assets/image-20210219105745331.png)

![image-20210219105814611](assets/image-20210219105814611.png)

## 初始化服务器

一个Redis服务器从启动到能够接收客户端的命令请求，需要经过一系列的初始化和设置过程。

比如初始化服务器状态，接受用户指定的服务器配置。创建相应的数据结构和网络连接。

#### 初始化服务器的状态结构

#### 载入配置选项

#### 初始化服务器数据结构

![image-20210219110442422](assets/image-20210219110442422.png)

![image-20210219110500476](assets/image-20210219110500476.png)

#### 还原数据库状态

#### 执行事件循环

### 重点回顾

![image-20210219110734291](assets/image-20210219110734291.png)